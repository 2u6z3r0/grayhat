{% load staticfiles %}
<html>
<head>
    <title>{% block head_title %}gray-hat{% endblock head_title %}</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}" >

    <!-- Optional theme -->
    <link rel="stylesheet" href="{% static 'css/bootstrap-theme.css' %}" >

    <link rel="stylesheet" href='{% static "css/base.css" %}' />
    <style>
        {% block style %}{% endblock style %}
    </style>
{% block extra_head %} {% endblock extra_head %}
</head>
<body>
{% include "messages.html" %}
<div class="container">
{% block content %}{% endblock content %}
</div>
{#<img src="{% static 'img/beach.jpg' %}">#}

<!-- Latest compiled and minified JavaScript -->
<script src="{% static 'js/jquery-1.12.4.js' %}"></script>
<script src="{% static 'js/bootstrap.js' %}" ></script>
<script src="{% static 'js/marked.js' %}" > </script>

<script type="text/javascript">
    $(document).ready(function () {
        $(".content-markdown").each(function () {
            var content = $(this).text()
{#            console.log(content)#}
            var markedContent = marked(content)
{#            console.log(markedContent)#}
            $(this).html(markedContent)
        })
        $(".post-detail-item img").each(function () {
           $(this).addClass("img-responsive")
        })

        var titleItem = $("#id_title");
        function setTitle(value) {
            $("#preview-title").text(value)
        }
        setTitle(titleItem.val())

        var contentItem = $("#id_content");
        function setContent(value) {
            var markedContent = marked(value)
            $("#preview-content").html(markedContent)
            $("#preview-content img").each(function () {
                $(this).addClass("img-responsive")
            })
        }
        setContent(contentItem.val())

        titleItem.keyup(function () {
            var newVal = $(this).val()
            setTitle(newVal)
        })

        contentItem.keyup(function () {
            var newContent = $(this).val()
            setContent(newContent)
        })
    })
</script>

</body>
</html>